var VueObserveVisibility=function(e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=(function(){function e(e){this.value=e}function t(t){var r,n;function i(r,n){try{var s=t[r](n),l=s.value;l instanceof e?Promise.resolve(l.value).then(function(e){i("next",e)},function(e){i("throw",e)}):o(s.done?"return":"normal",s.value)}catch(e){o("throw",e)}}function o(e,t){switch(e){case"return":r.resolve({value:t,done:!0});break;case"throw":r.reject(t);break;default:r.resolve({value:t,done:!1})}(r=r.next)?i(r.key,r.arg):n=null}this._invoke=function(e,t){return new Promise(function(o,s){var l={key:e,arg:t,resolve:o,reject:s,next:null};n?n=n.next=l:(r=n=l,i(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)};var o=function(){function e(t,n,i){r(this,e),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(n,i)}return n(e,[{key:"createObserver",value:function(e,t){var r,n,o,s,l,a,u,c=this;(this.observer&&this.destroyObserver(),this.frozen)||(this.options="function"==typeof(r=e)?{callback:r}:r,this.callback=this.options.callback,this.callback&&this.options.throttle&&(this.callback=(n=this.callback,o=this.options.throttle,s=void 0,l=void 0,a=void 0,(u=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),u=1;u<t;u++)r[u-1]=arguments[u];a=r,s&&e===l||(l=e,clearTimeout(s),s=setTimeout(function(){n.apply(void 0,[e].concat(i(a))),s=0},o))})._clear=function(){clearTimeout(s)},u)),this.oldResult=void 0,this.observer=new IntersectionObserver(function(e){var t=e[0];if(c.callback){var r=t.isIntersecting&&t.intersectionRatio>=c.threshold;if(r===c.oldResult)return;c.oldResult=r,c.callback(r,t),r&&c.options.once&&(c.frozen=!0,c.destroyObserver())}},this.options.intersection),t.context.$nextTick(function(){c.observer&&c.observer.observe(c.el)}))}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&this.options.intersection.threshold||0}}]),e}();function s(e,t,r){var n=t.value;if("undefined"==typeof IntersectionObserver)console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var i=new o(e,n,r);e._vue_visibilityState=i}}var l={bind:s,update:function(e,r,n){var i=r.value;if(!function e(r,n){if(r===n)return!0;if("object"===(void 0===r?"undefined":t(r))){for(var i in r)if(!e(r[i],n[i]))return!1;return!0}return!1}(i,r.oldValue)){var o=e._vue_visibilityState;o?o.createObserver(i,n):s(e,{value:i},n)}},unbind:function(e){var t=e._vue_visibilityState;t&&(t.destroyObserver(),delete e._vue_visibilityState)}};function a(e){e.directive("observe-visibility",l)}var u={version:"0.4.3",install:a},c=null;return"undefined"!=typeof window?c=window.Vue:"undefined"!=typeof global&&(c=global.Vue),c&&c.use(u),e.install=a,e.ObserveVisibility=l,e.default=u,e}({});
